# rust_docker_metrics

- 作成の経緯
  - `docker stats`というdockerで動作するコンテナのメトリクスを表示するコマンドがある。大変便利な機能だが表示値がすぐに流れてしまって作成したプロダクションがどのレベルまでリソースを使うのかをあまり意識しなくなってしまう。そこでメトリクスを意識したバッチ作成をすべきと考えメトリクスを横軸で残したいというモチベで作成してみた。

## ビルドと起動方法

- 以下のコマンドを叩いてビルド&起動する(dockerが動作していることが前提)

```asm
$ cargo build
$ ls -al target/debug/rust_metrics    # ファイルの存在確認
$ chmod +x target/debug/rust_metrics  # 権限付与
$ ./target/debug/rust_metrics      
```

- 以下のurlでアクセス
  - http://127.0.0.1:7878/chart.html
  - 10秒間隔でdocker上で動作するメトリクスを表示します。(10秒間で記録したmax値を表示)
  - 360point x 10秒間隔で値を取得してグラフ表示するので1時間分の動作状況を表示します。

  - ![](../../Desktop/rust_metrics2.gif)

## 課題
  - 一旦初回作品なので、まずは動くものをということを目標に作りました。課題としてい以下があげれれるかと思っています。
    - mainファイルだけで組んでいる。構造体とか別ファイルで管理したいところ。
    - エラーハンドリングはもう少し手を加えられそう。
    - テストコードもあればなお理想。